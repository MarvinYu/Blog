<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://gmpg.org/xfn/11">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Transactions: Myths, Surprises and Opportunities &mdash; Martin Kleppmann&rsquo;s talks</title>
    <link rel="stylesheet" type="text/css" media="screen, print, handheld" href="/css/typography.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/css/style.css" />
<link rel="stylesheet" type="text/css" media="all" href="/css/pygments-default.css" />
<link rel="stylesheet" type="text/css" media="all" href="/css/ansi2html.css" />
<link rel="stylesheet" type="text/css" media="all" href="/css/customizations.css?4" />
<!--[if lt IE 8]>
    <link rel="stylesheet" href="/css/ie.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/martinkl?format=xml" title="Martin Kleppmann's blog" />
<script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>

</head>

<body class="wordpress">
    <div id="page">
        <p id="top">
    <a id="to-content" href="#content" title="Skip to content">Skip to content</a>
</p>

<div id="header">
    <div class="wrapper">
        <strong id="blog-title">
            <a href="/" title="Home" rel="home">Martin Kleppmann</a>
        </strong>
    </div>
</div>

<div id="sub-header">
    <div class="wrapper">
        <div id="navigation">
            <ul>
                <li class="page_item"><a href="/contact.html" title="About/Contact">About/Contact</a></li>
            </ul>
        </div>
    </div>
</div>

<hr class="divider">


        <div class="wrapper">
            <div id="content">
                <a class="twitter-share-button" href="https://twitter.com/share" data-text="Transactions: Myths, Surprises and Opportunities"
                    data-via="martinkl" data-related="martinkl" data-size="large" data-count="none">Tweet</a>

                <h1>Transactions: Myths, Surprises and Opportunities</h1>

                <p>
                  A talk at
                  
                    <a href="http://www.codemesh.io/codemesh2015/martin-kleppmann">Code Mesh</a>,
                  
                  London, UK, 04 Nov 2015
                </p>

                <ul>
                  
                  
                    <li><a href="https://speakerdeck.com/ept/transactions-myths-surprises-and-opportunities">Slides</a></li>
                  
                  
                    <li><a href="https://www.youtube.com/watch?v=eo2EBdSbO10">Video</a></li>
                  
                  
                </ul>

                <script async="" class="speakerdeck-embed" data-id="0a5b3e46260542ff9e557458e33afd33" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script>

<iframe width="550" height="309" src="https://www.youtube-nocookie.com/embed/eo2EBdSbO10?rel=0" frameborder="0" allowfullscreen=""></iframe>

<p>This was a repeat of my
<a href="/2015/09/26/transactions-at-strange-loop.html">talk at Strange Loop 2015</a>.</p>

<h2 id="abstract">Abstract</h2>

<p>Back in the 1970s, the earliest databases had transactions. Then NoSQL abolished them. And now,
perhaps, they are making a comeback… but reinvented.</p>

<p>The purpose of transactions is to make application code simpler, by reducing the amount of failure
handling you need to do yourself. However, they have also gained a reputation for being slow and
unscalable. With the traditional implementation of serializable transactions (2-phase locking), that
reputation was somewhat deserved.</p>

<p>In the last few years, there has been a resurgence of interest in transaction algorithms that
perform well and scale well. This talk answers some of the biggest questions about the bright new
landscape of transactions:</p>

<ul>
  <li>You know that ACID stands for Atomicity, Consistency, Isolation and Durability, but are you
certain that you know precisely what those words mean? What race conditions can you get with weak
isolation (such as “read committed” and “repeatable read”), and how does this affect your
application?</li>
  <li>How do modern implementations of serializability work, and how are they different from traditional
algorithms?</li>
  <li>What are the strongest guarantees we can achieve, while maintaining high availability and high
performance at scale?</li>
  <li>When you build a microservices architecture or use stream processing, you often end up with data
spread across multiple databases. Does this mean you inevitably have to give up transactional
guarantees?</li>
</ul>

<h2 id="references">References</h2>

<ol>
  <li>Atul Adya: “<a href="http://pmg.csail.mit.edu/papers/adya-phd.pdf">Weak Consistency: A Generalized Theory and Optimistic Implementations for
  Distributed Transactions</a>,” PhD thesis,
  Massachusetts Institute of Technology, Cambridge, MA, USA, March 1999.</li>
  <li>Hagit Attiya, Faith Ellen, and Adam Morrison: “<a href="http://www.cs.technion.ac.il/people/mad/online-publications/podc2015-replds.pdf">Limitations of Highly-Available
Eventually-Consistent Data Stores</a>,”
at <em>ACM Symposium on Principles of Distributed Computing</em> (PODC), July 2015.</li>
  <li>Peter Bailis, Alan Fekete, Ali Ghodsi, Joseph M Hellerstein, and Ion Stoica:
“<a href="http://www.bailis.org/papers/hat-hotos2013.pdf">HAT, not CAP: Towards Highly Available Transactions</a>,”
at <em>14th USENIX Workshop on Hot Topics in Operating Systems</em> (HotOS), May 2013.</li>
  <li>Peter Bailis, Ali Ghodsi, Joseph M Hellerstein, and Ion Stoica:
“<a href="http://db.cs.berkeley.edu/papers/sigmod13-bolton.pdf">Bolt-on Causal Consistency</a>,”
at <em>ACM International Conference on Management of Data</em> (SIGMOD), June 2013.</li>
  <li>Peter Bailis, Aaron Davidson, Alan Fekete, et al.:
“<a href="http://www.bailis.org/papers/hat-vldb2014.pdf">Highly Available Transactions: Virtues and Limitations</a>,”
at <em>40th International Conference on Very Large Data Bases</em> (VLDB), September 2014.</li>
  <li>Hal Berenson, Philip A Bernstein, Jim N Gray, et al.:
“<a href="http://research.microsoft.com/pubs/69541/tr-95-51.pdf">A Critique of ANSI SQL Isolation Levels</a>,”
at <em>ACM International Conference on Management of Data</em> (SIGMOD), May 1995.</li>
  <li>Eric A Brewer: “<a href="http://cs609.cs.ua.edu/CAP12.pdf">CAP Twelve Years Later: How the “Rules” Have Changed</a>,”
<em>IEEE Computer Magazine</em>, volume 45, number 2, pages 23–29, February 2012.</li>
  <li>Michael J Cahill, Uwe Röhm, and Alan Fekete:
“<a href="http://www.cs.nyu.edu/courses/fall12/CSCI-GA.2434-001/p729-cahill.pdf">Serializable Isolation for Snapshot Databases</a>,”
at <em>ACM International Conference on Management of Data</em> (SIGMOD), pages 729–738, June 2008.</li>
  <li>Donald D Chamberlin, Morton M Astrahan, Michael W Blasgen, et al.:
“<a href="http://diaswww.epfl.ch/courses/adms07/papers/p632-chamberlin.pdf">A History and Evaluation of System R</a>,”
<em>Communications of the ACM</em>, volume 24, number 10, pages 632–646, October 1981.</li>
  <li>Tushar Deepak Chandra and Sam Toueg:
“<a href="http://courses.csail.mit.edu/6.852/08/papers/CT96-JACM.pdf">Unreliable Failure Detectors for Reliable Distributed Systems</a>,”
<em>Journal of the ACM</em>, volume 43, number 2, pages 225–267, March 1996.</li>
  <li>Kapali P Eswaran, Jim N Gray, Raymond A Lorie, and Irving L Traiger:
“<a href="http://paul.rutgers.edu/cs545/S02/papers/eswaran-transaction.pdf">The Notions of Consistency and Predicate Locks in a Database System</a>,”
<em>Communications of the ACM</em>, volume 19, number 11, pages 624–633, November 1976.</li>
  <li>Hector Garcia-Molina and Kenneth Salem: “<a href="http://www.cs.cornell.edu/andru/cs711/2002fa/reading/sagas.pdf">Sagas</a>,”
at <em>ACM International Conference on Management of Data</em> (SIGMOD), May 1987.</li>
  <li>Jim N Gray, Raymond A Lorie, Gianfranco R Putzolu, and Irving L Traiger:
“<a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.92.8248">Granularity of Locks and Degrees of Consistency in a Shared Data Base</a>,”
in <em>Modelling in Data Base Management Systems: Proceedings of the IFIP Working Conference on
Modelling in Data Base Management Systems</em>, G.M. Nijssen, Editor. Elsevier/North Holland
Publishing, pages 364–394, 1976.</li>
  <li>Rachid Guerraoui: “<a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.27.6456">Revisiting the relationship between non-blocking atomic commitment and
consensus</a>,” at <em>9th
International Workshop on Distributed Algorithms</em> (WDAG), pages 87–100, September 1995.</li>
  <li>Theo Härder and Andreas Reuter:
“<a href="http://web.stanford.edu/class/cs340v/papers/recovery.pdf">Principles of Transaction-Oriented Database Recovery</a>,”
<em>ACM Computing Surveys</em>, volume 15, number 4, pages 287–317, December 1983.</li>
  <li>Pat Helland and Dave Campbell:
“<a href="https://database.cs.wisc.edu/cidr/cidr2009/Paper_133.pdf">Building on Quicksand</a>,”
at <em>4th Biennial Conference on Innovative Data Systems Research</em> (CIDR), January 2009.</li>
  <li>Joseph M Hellerstein: “<a href="http://www.sigmod.org/publications/sigmod-record/1003/p05.article.hellerstein.pdf">The Declarative Imperative: Experiences and Conjectures in Distributed
Logic</a>,”
<em>ACM SIGMOD Record</em>, volume 39, number 1, March 2010.</li>
  <li>Martin Kleppmann: “<a href="http://martin.kleppmann.com/2014/11/25/hermitage-testing-the-i-in-acid.html">Hermitage: Testing the ‘I’ in
ACID</a>,” 25 November 2014.</li>
  <li>Martin Kleppmann: “<a href="http://arxiv.org/abs/1509.05393">A Critique of the CAP Theorem</a>,”
Preprint arXiv:1509.05393 [cs.DC], Sep 2015.</li>
  <li>Martin Kleppmann: <a href="http://dataintensive.net/"><em>Designing Data-Intensive Applications</em></a>.
O’Reilly Media, to appear. ISBN 1-4493-7332-1.</li>
  <li>Wyatt Lloyd, Michael J Freedman, Michael Kaminsky, and David G Andersen:
“<a href="https://www.cs.cmu.edu/~dga/papers/cops-sosp2011.pdf">Don’t Settle for Eventual: Scalable Causal Consistency for Wide-Area Storage with COPS</a>,”
at <em>23rd ACM Symposium on Operating Systems Principles</em> (SOSP), pages 401–416, October 2011.</li>
  <li>Dan R K Ports and Kevin Grittner:
“<a href="http://drkp.net/papers/ssi-vldb12.pdf">Serializable Snapshot Isolation in PostgreSQL</a>,”
at <em>38th International Conference on Very Large Data Bases</em> (VLDB), volume 5, number 12, pages
1850–1861, August 2012.</li>
  <li>Michael Stonebraker, Samuel Madden, Daniel J Abadi, et al.:
“<a href="http://www.vldb.org/conf/2007/papers/industrial/p1150-stonebraker.pdf">The End of an Architectural Era (It’s Time for a Complete Rewrite)</a>,”
at <em>33rd International Conference on Very Large Data Bases</em> (VLDB), pages 1150–1160, September 2007.</li>
  <li>Marek Zawirski, Annette Bieniusa, Valter Balegas, et al.:
“<a href="http://arxiv.org/abs/1310.3107">SwiftCloud: Fault-Tolerant Geo-Replication Integrated all the Way to the Client Machine</a>,”
INRIA Research Report 8347, August 2013.</li>
</ol>

            </div>

            <div id="sidebar">
                <div id="carrington-subscribe" class="widget">
    <h2 class="widget-title">Subscribe</h2>
    <a class="feed" title="RSS 2.0 feed for posts" rel="alternate" href="http://feeds.feedburner.com/martinkl">
        Site <acronym title="Really Simple Syndication">RSS</acronym> feed
    </a>

    <div id="mc_embed_signup">
        <p>
            To get notified when I write something new,
            <a href="https://twitter.com/martinkl">follow me</a> on Twitter,
            <a href="http://feeds.feedburner.com/martinkl">subscribe</a> to the RSS feed,
            or enter your email address:
        </p>

        <form action="//kleppmann.us2.list-manage.com/subscribe/post?u=9a1adaf549282981a96e171d1&amp;id=4543b695f6"
            method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate>
            <fieldset>
                <div class="mc-field-group">
                    <label for="mce-EMAIL">Email address:</label>
                    <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
                </div>
                <div style="position: absolute; left: -5000px;"><input type="text" name="b_9a1adaf549282981a96e171d1_4543b695f6" tabindex="-1" value=""></div>
            </fieldset>
        </form>

        <p class="disclaimer">
            I won't give your address to anyone else, won't send you any spam, and you can unsubscribe at any time.
        </p>
    </div>
</div>

<div id="primary-sidebar">
    <div id="book-promo" class="widget">
        <h2 class="title">My book</h2>
        <p><a href="http://dataintensive.net" target="_top"><img src="/images/book-cover-small.png" border="0" alt="Designing Data-Intensive Applications" width="180" height="236"/></a></p>
        <p>My book,
        <a href="http://dataintensive.net"><em>Designing Data-Intensive Applications</em></a>,
        was published by O’Reilly in March 2017.</p>
    </div>

    <div class="widget">
        <p>I am a researcher at the
        <a href="http://www.cl.cam.ac.uk/">University of Cambridge</a>,
        working on the <a href="http://www.trvedata.org/">TRVE DATA</a> project
        at the intersection of databases, distributed systems, and information security.</p>
    </div>

    <div id="tweets" class="widget">
        <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/martinkl" data-widget-id="557543934298423296">Tweets by @martinkl</a>
    </div>
</div>

                





<div id="secondary-sidebar">
    <div class="widget">
        <h2 class="title">Recent posts</h2>
        <ul>
            
              <li>31 Jan 2020: <a href="/2020/01/31/brief-brexit-lament.html">A brief Brexit lament</a></li>
            
              <li>30 Oct 2019: <a href="/2019/10/30/research-update.html">Research update for 2019</a></li>
            
              <li>27 Jun 2019: <a href="/2019/06/27/hydra-interview.html">Figuring out the future of distributed data systems (interview)</a></li>
            
              <li>18 Jan 2018: <a href="/2018/01/18/event-types-in-kafka-topic.html">Should you put several event types in the same Kafka topic?</a></li>
            
              <li>15 Mar 2017: <a href="/2017/03/15/map-distributed-data-systems.html">Drawing a map of distributed data systems</a></li>
            
            <li><a href="/archive.html">Full archive</a></li>
        </ul>
    </div>

    <div class="widget">
        <h2 class="title">Conference talks</h2>
        <ul>
            
              <li><a href="/2019/11/08/code-mesh-isabelle.html">08 Nov 2019 at Code Mesh</a></li>
            
              <li><a href="/2019/10/02/tonke-dragt-tagung.html">02 Oct 2019 at Tagung über Tonke Dragts Jugendromane</a></li>
            
              <li><a href="/2019/09/14/strange-loop-isabelle.html">14 Sep 2019 at Strange Loop</a></li>
            
              <li><a href="/2019/07/11/hydra-distributed.html">11 Jul 2019 at Hydra distributed computing conference</a></li>
            
              <li><a href="/2019/06/07/tng-big-techday.html">07 Jun 2019 at TNG Big Techday</a></li>
            
            <li><a href="/talks.html">Full archive</a></li>
        </ul>
    </div>
</div>

            </div>
        </div>

        <hr class="divider" />

<div id="footer">
    <div class="wrapper">
        <p id="generator-link">
            <a rel="license" href="http://creativecommons.org/licenses/by/3.0/"
                style="float: left; padding: 0.3em 1em 0 0;"><img alt="Creative Commons License"
                src="/images/creative-commons.png" width="88" height="31" /></a>
            Unless otherwise specified, all content on this site is licensed under a
            <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
                Attribution 3.0 Unported License</a>.
            Theme borrowed from
            <span id="theme-link"><a href="http://carringtontheme.com" title="Carrington theme for WordPress">Carrington</a></span>,
            ported to <a href="https://github.com/mojombo/jekyll">Jekyll</a> by Martin Kleppmann.
        </p>
    </div>
</div>

    </div>

    <!-- Twitter -->
<script>
!function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
        p = /^http:/.test(d.location) ? 'http' : 'https';
    if (!d.getElementById(id)) {
        js = d.createElement(s);
        js.id = id;
        js.src = p + "://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js,fjs);
    }
}(document,"script","twitter-wjs");
</script>

</body>
</html>
